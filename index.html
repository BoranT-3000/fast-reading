<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Flash-Reader</title>
  <!-- <link rel="icon" href="data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='0.9em' font-size='90'%3E%E2%9A%A1%3C/text%3E%3C/svg%3E"> -->
  <link rel="icon" type="image/png" href="logo.png">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container py-4">

    <!-- HEADER -->
    <header class="d-flex justify-content-between align-items-center mb-4">
      <div class="d-flex align-items-center gap-3">
        <img src="logo.png" alt="Sema Hoca Logo" style="height: 50px;">
        <h1 class="h5 m-0" data-i18n="title">Sema Hoca ile Hızlı Okuma Egzersizi</h1>
      </div>

      <div class="d-flex align-items-center gap-3">
        <!-- Tema kapsülü -->
        <div class="theme-toggle">
          <span class="theme-emoji" aria-hidden="true">🌙</span>
          <label class="form-check form-switch m-0">
            <input class="form-check-input" type="checkbox" id="themeToggle" aria-label="Tema">
          </label>
          <span class="theme-emoji" aria-hidden="true">☀️</span>
        </div>

        <!-- Dil seçici (HEADER) -->
        <div style="width: 120px;">
          <select id="langSelect" class="form-select form-select-sm" aria-label="Dil">
            <option value="tr" selected>🇹🇷 Türkçe</option>
            <option value="en">🇬🇧 English</option>
          </select>
        </div>
      </div>
    </header>

    <!-- TABS -->
    <ul class="nav nav-tabs" id="myTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="premade-tab" data-bs-toggle="tab"
                data-bs-target="#premade-tab-pane" type="button" role="tab"
                aria-controls="premade-tab-pane" aria-selected="true"
                data-i18n="tab_premade">📄 Hazır Metin & Dosya</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="custom-tab" data-bs-toggle="tab"
                data-bs-target="#custom-tab-pane" type="button" role="tab"
                aria-controls="custom-tab-pane" aria-selected="false"
                data-i18n="tab_custom">✍️ Özel Metin & URL</button>
      </li>
    </ul>

    <div class="tab-content" id="myTabContent">
      <!-- PREMADE -->
      <div class="tab-pane fade show active p-3 border border-top-0 rounded-bottom mb-3"
           id="premade-tab-pane" role="tabpanel" aria-labelledby="premade-tab" tabindex="0">
        <select id="librarySelect" class="form-select">
          <option selected disabled data-i18n="choose_preset">Hazır metin seç…</option>
        </select>
        <input type="file" id="fileInput" accept=".txt, .csv" class="form-control mt-2">
        <select id="partSelect" class="form-select mt-2 d-none"></select>
      </div>

      <!-- CUSTOM -->
      <div class="tab-pane fade p-3 border border-top-0 rounded-bottom mb-3"
           id="custom-tab-pane" role="tabpanel" aria-labelledby="custom-tab" tabindex="0">
        <div class="input-group mb-3">
          <input id="urlInput" type="url" class="form-control"
                 placeholder="https://site.com/makale"
                 data-i18n-placeholder="url_placeholder">
          <button id="fetchBtn" class="btn btn-outline-primary" data-i18n="btn_fetch">URL içeriğini ekle</button>
        </div>

        <div class="form-check text-start mb-2">
          <input class="form-check-input" type="checkbox" id="customTextToggle">
          <label class="form-check-label" for="customTextToggle" data-i18n="use_text_here">Buradaki metni kullan</label>
        </div>

        <textarea id="customTextArea" class="form-control" rows="6"
                  placeholder="Veya özel metninizi buraya yapıştırın…"
                  data-i18n-placeholder="custom_placeholder"></textarea>
      </div>
    </div>

    <!-- AYARLAR -->
    <div class="d-grid gap-2 mb-3">
      <button class="btn btn-outline-secondary" type="button" data-bs-toggle="collapse"
              data-bs-target="#settingsCollapse" aria-expanded="false" aria-controls="settingsCollapse"
              data-i18n="settings">Ayarlar</button>
    </div>

    <div class="collapse" id="settingsCollapse">
      <div class="card card-body mb-3">
        <div class="settings-grid">
          <label class="form-check m-0">
            <input class="form-check-input" type="checkbox" id="shuffleToggle">
            <span class="form-check-label" data-i18n="shuffle">Karıştır</span>
          </label>

          <label class="form-check m-0">
            <input class="form-check-input" type="checkbox" id="soundToggle">
            <span class="form-check-label" data-i18n="tts">Sesli okuma (≤ 60 KPM)</span>
          </label>

          <label class="form-check m-0">
            <input class="form-check-input" type="checkbox" id="focusToggle" checked>
            <span class="form-check-label" data-i18n="focus_mode">Okuma Odağı</span>
          </label>

          <div class="d-flex align-items-center gap-2">
            <label for="voiceGender" class="col-form-label-sm" data-i18n="voice">Ses</label>
            <select id="voiceGender" class="form-select form-select-sm" style="width:140px">
              <option value="female" selected data-i18n="female">Kadın Sesi</option>
              <option value="male" data-i18n="male">Erkek Sesi</option>
            </select>
          </div>

          <!-- DİL (AYARLAR) -->
          <div class="d-flex align-items-center gap-2">
            <label for="langSelectSettings" class="col-form-label-sm">🌐</label>
            <select id="langSelectSettings" class="form-select form-select-sm" style="width:140px">
              <option value="tr">🇹🇷 Türkçe</option>
              <option value="en">🇬🇧 English</option>
            </select>
          </div>

          <!-- DİKEY ODAK / KONUMLAR -->
          <label class="form-check m-0">
            <input class="form-check-input" type="checkbox" id="focusVertToggle">
            <span class="form-check-label">Dikey Odağı</span>
          </label>

          <div class="d-flex align-items-center gap-2">
            <label for="focusYRange" class="col-form-label-sm">Odak Y (%)</label>
            <input id="focusYRange" type="range" min="0" max="100" value="50" class="form-range" style="width:180px">
            <span id="focusYValue" class="small text-muted">50</span>
          </div>

          <div class="d-flex align-items-center gap-2">
            <label for="focusXRange" class="col-form-label-sm">Odak X (%)</label>
            <input id="focusXRange" type="range" min="0" max="100" value="50" class="form-range" style="width:180px">
            <span id="focusXValue" class="small text-muted">50</span>
          </div>
        </div>
      </div>
    </div>

    <!-- SLIDERLAR -->
    <div class="row row-cols-1 row-cols-md-3 g-3 mb-3">
      <div class="col">
        <label class="form-label w-100">
          <span data-i18n="speed">Hız (KPM)</span>: <span id="wpmValue">250</span>
          <input type="range" id="wpmSlider" class="form-range" min="10" max="1000" value="250">
        </label>
        <small class="text-muted" data-i18n="hint_speed">Dakikada gösterilecek kelime sayısını ayarlar.</small>
      </div>
      <div class="col">
        <label class="form-label w-100">
          <span data-i18n="num_words">Kelime adeti</span>: <span id="numWordsValue">1</span>
          <input type="range" id="numWordsSlider" class="form-range" min="1" max="10" value="1">
        </label>
        <small class="text-muted" data-i18n="hint_num_words">Ekranda aynı anda kaç kelime görüneceğini seçin.</small>
      </div>
      <div class="col">
        <label class="form-label w-100">
          <span data-i18n="font">Font (rem)</span>: <span id="fontSizeValue">3.5</span>
          <input type="range" id="fontSizeSlider" class="form-range" min="1" max="80" step="0.1" value="3.5">
        </label>
        <small class="text-muted" data-i18n="hint_font">Okuma metninin yazı tipi boyutunu değiştirin.</small>
      </div>
    </div>

    <!-- KONTROLLER -->
    <div class="d-flex flex-wrap gap-3 justify-content-center mb-3">
      <button id="playPauseBtn" class="btn btn-primary px-4" data-i18n="start">Başlat</button>
      <button id="resetBtn" class="btn btn-outline-secondary px-4" data-i18n="restart">Baştan</button>
      <button id="fullBtn" class="btn btn-outline-dark" data-i18n="zoom_in">🔍 Büyüt</button>
      <button id="exitFullBtn" class="btn btn-outline-dark d-none" data-i18n="zoom_out">↩︎ Küçült</button>
    </div>

    <!-- GÖSTERİM -->
    <main id="display-wrapper" class="position-relative">
      <div id="focus-line"></div>          <!-- yatay çizgi -->
      <div id="focus-line-vert"></div>     <!-- dikey çizgi -->
      <div id="display" class="border rounded p-4 text-center fw-bold"></div>
      <div class="progress mt-2" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="height:5px;">
        <div id="progressBar" class="progress-bar bg-primary" style="width:0%"></div>
      </div>
    </main>

    <!-- YARDIM -->
    <div class="mt-4 pt-3 border-top">
      <p class="text-muted" data-i18n="help_title">Kontrol Düğmeleri:</p>
      <ul class="list-unstyled small" style="color: var(--muted);">
        <li data-i18n="help_url"><strong>URL içeriğini ekle:</strong> Linkteki metni “Özel metin” kutusuna ekler.</li>
        <li data-i18n="help_custom"><strong>Özel metin:</strong> Kendi metninizi yapıştırarak pratik yapın.</li>
        <li data-i18n="help_file"><strong>Hazır metin/Dosya:</strong> Hazır metin seçin veya .txt/.csv yükleyin.</li>
        <li data-i18n="help_shuffle"><strong>Karıştır:</strong> Kelimelerin sırasını rastgele karıştırır.</li>
        <li data-i18n="help_tts"><strong>Sesli okuma:</strong> Düşük hızlarda etkilidir.</li>
        <li data-i18n="help_play"><strong>Başlat/Duraklat/Devam:</strong> Okumayı kontrol eder.</li>
        <li data-i18n="help_restart"><strong>Baştan:</strong> Metnin başına döner.</li>
        <li data-i18n="help_zoom"><strong>🔍 Büyüt / ↩︎ Küçült:</strong> Odak için tam ekran.</li>
      </ul>
    </div>

    <footer class="text-center small text-muted mt-4">© 2025 fast-reading by orionis labs</footer>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="lang.js"></script>
  <script src="app.js"></script>
</body>
</html>
